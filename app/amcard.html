<!doctype html>
<html class="no-js" lang="">
  <head runat="server">
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <title></title>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
  m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-21742036-2', 'auto');
        ga('send', 'pageview');
        //
        ga('create', 'UA-80283483-1', 'auto', { 'name': 'myb' });
        ga('myb.send', 'pageview');
    </script>
  </head>
  <body>
   
  </body>
    <script>
        // var download_link, iframe, loadDateTime, redirected, scheme_link, t;
        // scheme_link = "mcard://";
        // download_link = "https://app.amwaynet.com.tw/amcard/index.aspx";
        // redirected = false;
        var custom = "mcard://";
        var alt = "https://app.amwaynet.com.tw/amcard/index.aspx";
        var g_intent = "intent://scan/#Intent;scheme=mcard;package=com.google.mcard.client.android;end";
        var timer;
        var heartbeat;
        var iframe_timer;

        function clearTimers() {
            clearTimeout(timer);
            clearTimeout(heartbeat);
            clearTimeout(iframe_timer);
        }

        function intervalHeartbeat() {
            if (document.webkitHidden || document.hidden) {
                clearTimers();
            }
        }

        function tryIframeApproach() {
            var iframe = document.createElement("iframe");
            iframe.style.border = "none";
            iframe.style.width = "1px";
            iframe.style.height = "1px";
            iframe.onload = function () {
                document.location = alt;
            };
            iframe.src = custom;
            document.body.appendChild(iframe);
        }

        function tryWebkitApproach() {
            document.location = custom;
            timer = setTimeout(function () {
                document.location = alt;
            }, 2500);
        }

        function useIntent() {
            document.location = g_intent;
        }

        function launch_app_or_alt_url(el) {
            heartbeat = setInterval(intervalHeartbeat, 200);
            if (navigator.userAgent.match(/Chrome/)) {
                useIntent();
            } else if (navigator.userAgent.match(/Firefox/)) {
                tryWebkitApproach();
                iframe_timer = setTimeout(function () {
                    tryIframeApproach();
                }, 1500);
            } else {
                tryIframeApproach();
            }
        }

        // $(".source_url").click(function (event) {
            launch_app_or_alt_url(window);
        //     event.preventDefault();
        // });
    </script>
</html>
